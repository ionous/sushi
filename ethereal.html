<hsm-state name="Ethereal" action-bar="actionBar" hsm-enter="actionBar.bindTo(map)" hsm-exit="actionBar.destroy()">
  <hsm-event on="hover-select" run="player.faceTarget($evt.target, $evt.pos)"></hsm-event>
  <hsm-event on="hover-highlight" run="mouse.show(!$evt.target?'pointer':'bullseye')"></hsm-event>
  <hsm-event on="player-approach" when="$evt.target" run="actionBar.open($evt.target)"></hsm-event>
  <hsm-event on="player-interact" when="$evt.target" run="actionBar.open($evt.target)"></hsm-event>
  <!--   -->
  <hsm-state name="EtherealWaiting">
  </hsm-state>
  <!--  -->
  <hsm-event on="modal-opened" when="$evt.source =='actionBar'" goto="EtherealActionBar"></hsm-event>
  <!--  -->
  <hsm-state name="EtherealActionBar" hsm-exit="actionBar.dismiss($evt.name)">
    <hsm-event on="keys" when="$evt.escapeKey()" run="actionBar.dismiss('escape pressed')"></hsm-event>
  </hsm-state>
</hsm-state>
