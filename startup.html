<!-- flow chart, default starts waiting for game-created, leaves via GameState -->
<hsm-state name="Startup">
  <hsm-state name="GamePending">
    <hsm-event on="game-created" goto="StartingGame"></hsm-event>
    <hsm-event on="game-loaded" goto="RestoringGame"></hsm-event>
  </hsm-state>
  <hsm-state hsm-enter="player.create($evt.where, '/bin/images/princess.png', 64)">
    <hsm-event on="player-created" run="player.locate($evt.where)"></hsm-event>
    <hsm-event on="player-located" run="map.changeMap($evt.where)"></hsm-event>
    <!--  -->
    <hsm-state name="StartingGame">
      <hsm-event on="map-loaded" run="game.startGame()"></hsm-event>
      <hsm-event on="game-started" goto="GameStarted"></hsm-event>
    </hsm-state>
    <!--  -->
    <hsm-state name="RestoringGame">
      <hsm-event on="map-loaded" run="$evt.where.sync()" goto="GameStarted"></hsm-event>
    </hsm-state>
  </hsm-state>
</hsm-state>
